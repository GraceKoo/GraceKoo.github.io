<!DOCTYPE html>
<html lang="Zh">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/me.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/me.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/me.jpg">
  <link rel="mask-icon" href="/images/me.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://unknown.yuzhouwan.com').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: true,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="生成数据安装matplotlib1$ pip3 install --user matplotlib    测试matplotlib12$ python3&gt;&gt; import matplotlib  如果没有出现任何错误消息，就说明你系统安装了matplotlib。 matplotlib画廊要查看使用matplotlib可制作的各种图表，请访问http:&#x2F;&#x2F;matplotlib.org&#x2F;的">
<meta property="og:type" content="article">
<meta property="og:title" content="数据可视化基础">
<meta property="og:url" content="https://unknown.yuzhouwan.com/2017/09/25/DataView/index.html">
<meta property="og:site_name" content="Grace Koo&#39;s Blog">
<meta property="og:description" content="生成数据安装matplotlib1$ pip3 install --user matplotlib    测试matplotlib12$ python3&gt;&gt; import matplotlib  如果没有出现任何错误消息，就说明你系统安装了matplotlib。 matplotlib画廊要查看使用matplotlib可制作的各种图表，请访问http:&#x2F;&#x2F;matplotlib.org&#x2F;的">
<meta property="og:locale" content="Zh">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_1.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_2.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_3.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_4.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_5.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_6.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_7.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_8.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_9.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_10.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_11.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_12.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_13.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_14.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_15.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_16.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_17.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_18.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_19.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_20.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_21.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_22.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_23.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_24.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_25.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_26.png">
<meta property="og:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_27.png">
<meta property="article:published_time" content="2017-09-24T20:50:00.000Z">
<meta property="article:modified_time" content="2020-01-28T03:03:19.475Z">
<meta property="article:author" content="Grace Koo">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="iPython">
<meta property="article:tag" content="Pygal">
<meta property="article:tag" content="Matplotlib">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://unknown.yuzhouwan.com/images/Python-base/DataView_1.png">

<link rel="canonical" href="https://unknown.yuzhouwan.com/2017/09/25/DataView/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>数据可视化基础 | Grace Koo's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Grace Koo's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">LaLaLa~~~</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-mr.sweet">

    <a href="/sweet/" rel="section"><i class="fa fa-fw fa-paw"></i>Mr.Sweet</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="Zh">
    <link itemprop="mainEntityOfPage" href="https://unknown.yuzhouwan.com/2017/09/25/DataView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Grace Koo">
      <meta itemprop="description" content="正在深入学习各种CV知识">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Grace Koo's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          数据可视化基础
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-24 20:50:00" itemprop="dateCreated datePublished" datetime="2017-09-24T20:50:00Z">2017-09-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-28 03:03:19" itemprop="dateModified" datetime="2020-01-28T03:03:19Z">2020-01-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/DataView/" itemprop="url" rel="index">
                    <span itemprop="name">DataView</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="生成数据"><a href="#生成数据" class="headerlink" title="生成数据"></a>生成数据</h1><h2 id="安装matplotlib"><a href="#安装matplotlib" class="headerlink" title="安装matplotlib"></a>安装matplotlib</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install --user matplotlib</span><br></pre></td></tr></table></figure>



<h3 id="测试matplotlib"><a href="#测试matplotlib" class="headerlink" title="测试matplotlib"></a>测试matplotlib</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python3</span><br><span class="line">&gt;&gt; <span class="keyword">import</span> matplotlib</span><br></pre></td></tr></table></figure>

<p>如果没有出现任何错误消息，就说明你系统安装了matplotlib。</p>
<h3 id="matplotlib画廊"><a href="#matplotlib画廊" class="headerlink" title="matplotlib画廊"></a>matplotlib画廊</h3><p>要查看使用matplotlib可制作的各种图表，请访问<a href="http://matplotlib.org/的示例画廊。单击画廊中的图表，就可查看用于生成图表的代码。" target="_blank" rel="noopener">http://matplotlib.org/的示例画廊。单击画廊中的图表，就可查看用于生成图表的代码。</a></p>
<h2 id="绘制简单的折线图plot"><a href="#绘制简单的折线图plot" class="headerlink" title="绘制简单的折线图plot()"></a>绘制简单的折线图plot()</h2><p>我们将使用平方数序列1、4、9、16和25来绘制这个图标。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">squares = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">25</span>]</span><br><span class="line">plt.plot(squares)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_1.png" alt="2017-09-19.2.15.10"></p>
<p>首先，导入了模块pyplot，并给它指定了别名plt。模块pyplot包含很多用于生成图标的函数。</p>
<p>我们创建了一个列表，在其中存储了前述平方数，再将这个列表传递给函数plot()。</p>
<p>plt.show()打开matplotlib查看器，并显示绘制的图形。</p>
<h3 id="修改标签文字和线条粗细"><a href="#修改标签文字和线条粗细" class="headerlink" title="修改标签文字和线条粗细"></a>修改标签文字和线条粗细</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">squares = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">25</span>]</span><br><span class="line">plt.plot(squares,linewidth=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置图表标题，并给坐标轴加上标签</span></span><br><span class="line">plt.title(<span class="string">"Square Numbers"</span>,fontsize=<span class="number">24</span>)</span><br><span class="line">plt.xlabel(<span class="string">"Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">"Square of Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置刻度标记的大小</span></span><br><span class="line">plt.tick_params(axis=<span class="string">'both'</span>,labelsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>tick_params()设置刻度的样式，其中指定的实参将影响x轴和y轴上的刻度（axis=’both’），并将刻度标记的字号设置为14。</p>
<p><img data-src="/images/Python-base/DataView_2.png" alt="017-09-19.3.16.14"></p>
<h3 id="校正图形"><a href="#校正图形" class="headerlink" title="校正图形"></a>校正图形</h3><p>我们发现没有正确的绘制数据：折线图的终点指出4.0的平方为25！下面来修复这个问题。</p>
<a id="more"></a>

<p>当你向plot()提供一系列数字时，它假设第一个数据点对应的x坐标值为0，但我们的第一个点对应的x值为1。为改变这种默认行为，我们可以给plot()同时提供输入值和输出值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">input_values = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">squares = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">25</span>]</span><br><span class="line">plt.plot(input_values,squares,linewidth=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置图表标题，并给坐标轴加上标签</span></span><br><span class="line">plt.title(<span class="string">"Square Numbers"</span>,fontsize=<span class="number">24</span>)</span><br><span class="line">plt.xlabel(<span class="string">"Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">"Square of Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置刻度标记的大小</span></span><br><span class="line">plt.tick_params(axis=<span class="string">'both'</span>,labelsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_3.png" alt="屏幕快照 2017-09-19 下午3.30.45"></p>
<h3 id="使用scatter-绘制散点图"><a href="#使用scatter-绘制散点图" class="headerlink" title="使用scatter()绘制散点图"></a>使用scatter()绘制散点图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.scatter(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_4.png" alt="屏幕快照 2017-09-19 下午3.56.57"></p>
<p>向函数scatter()传递一对x和y坐标，它将在指定位置绘制一个点。</p>
<p>优化此图形：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.scatter(<span class="number">2</span>,<span class="number">4</span>,s=<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置图表标题并给坐标轴加上标签</span></span><br><span class="line">plt.title(<span class="string">"Square Numbers"</span>,fontsize=<span class="number">24</span>)</span><br><span class="line">plt.xlabel(<span class="string">"Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">"Square of Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置刻度标记的大小</span></span><br><span class="line">plt.tick_params(axis=<span class="string">'both'</span>,which=<span class="string">'major'</span>,labelsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>Scatter()中的实参s设置了绘制图形时使用的点的尺寸。</p>
<p><img data-src="/images/Python-base/DataView_5.png" alt="屏幕快照 2017-09-19 下午4.05.05"></p>
<h3 id="使用scatter-绘制一系列点"><a href="#使用scatter-绘制一系列点" class="headerlink" title="使用scatter()绘制一系列点"></a>使用scatter()绘制一系列点</h3><p>要绘制一系列点，可向scatter()传递两个分别包含x和y的列表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x_values = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">y_values = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">25</span>]</span><br><span class="line"></span><br><span class="line">plt.scatter(x_values,y_values,s=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置图表标题并给坐标轴加上标签</span></span><br><span class="line">plt.title(<span class="string">"Square Numbers"</span>,fontsize=<span class="number">24</span>)</span><br><span class="line">plt.xlabel(<span class="string">"Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">"Square of Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置刻度标记的大小</span></span><br><span class="line">plt.tick_params(axis=<span class="string">'both'</span>,which=<span class="string">'major'</span>,labelsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>将这些列表传递给scatter()时，matplotlib<strong>依次从每个列表中读取一个值来绘制一个点。</strong></p>
<p><img data-src="/images/Python-base/DataView_6.png" alt="屏幕快照 2017-09-19 下午4.17.41"></p>
<h3 id="自动计算数据"><a href="#自动计算数据" class="headerlink" title="自动计算数据"></a>自动计算数据</h3><p>手工计算列表要包含的值可能效率低下，需要绘制的点很多时尤其如此。可以不必手工计算包含点坐标的列表，而让Python循环来替我们完成这种事。下面绘制了1000个点。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x_values = list(range(<span class="number">1</span>,<span class="number">1001</span>))</span><br><span class="line">y_values = [x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> x_values]</span><br><span class="line"></span><br><span class="line">plt.scatter(x_values,y_values,s=<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置图表标题并给坐标轴加上标签</span></span><br><span class="line">plt.title(<span class="string">"Square Numbers"</span>,fontsize=<span class="number">24</span>)</span><br><span class="line">plt.xlabel(<span class="string">"Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">"Square of Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置刻度标记的大小</span></span><br><span class="line">plt.tick_params(axis=<span class="string">'both'</span>,which=<span class="string">'major'</span>,labelsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置每个坐标轴的取值范围</span></span><br><span class="line">plt.axis([<span class="number">0</span>,<span class="number">1100</span>,<span class="number">0</span>,<span class="number">1100000</span>])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>函数axis()要求提供四个值：x和y坐标轴的最小最大值。</p>
<p><img data-src="/images/Python-base/DataView_7.png" alt="屏幕快照 2017-09-19 下午4.38.12"></p>
<h3 id="删除数据点的轮廓"><a href="#删除数据点的轮廓" class="headerlink" title="删除数据点的轮廓"></a>删除数据点的轮廓</h3><p>matplotlib允许你给散点图中的各个点指定颜色。默认为蓝色点和黑色轮廓，在散点图不含数据不多时效果很好。但绘制很多点时，黑色轮廓可能会粘连在一起。删除轮廓,传递实参edgecolor。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.scatter(x_values,y_values,edgecolor=<span class="string">'none'</span>,s=<span class="number">40</span>)</span><br></pre></td></tr></table></figure>



<h3 id="自定义颜色"><a href="#自定义颜色" class="headerlink" title="自定义颜色"></a>自定义颜色</h3><p>修改数据点的颜色，向scatter()传递参数c，如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.scatter(x_values,y_values,c=<span class="string">'red'</span>,edgecolor=<span class="string">'none'</span>,s=<span class="number">40</span>)</span><br></pre></td></tr></table></figure>

<p>你还可以使用RGB颜色模式自定义颜色。要指定自定义颜色，可传递参数c，并将其设置为一个元组，其中包含三个0～1之间的小数值，它们分别表示红色、绿色和蓝色分量。例如，下面代码将创建一个由淡蓝色点组成的散点图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.scatter(x_values,y_values,c=(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.8</span>),edgecolor=<span class="string">'none'</span>,s=<span class="number">40</span>)</span><br></pre></td></tr></table></figure>

<p>值越接近0，指定的颜色越深，越接近1，指定的颜色越浅。</p>
<h3 id="使用颜色映射"><a href="#使用颜色映射" class="headerlink" title="使用颜色映射"></a>使用颜色映射</h3><p>颜色映射（colormap）是一系列颜色，它们从起始颜色渐变到结束颜色。在可视化中，颜色映射用于突出数据的规律，例如，你使用颜色深的表示数值大的，浅的表示小的。</p>
<p>模块pyplot内置了一组颜色映射。要使用这些颜色映射，你需要告诉pyplot如何设置数据集中每个点的颜色。下面演示如何根据每个点的y值来设置颜色：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x_values = list(range(<span class="number">1</span>,<span class="number">1001</span>))</span><br><span class="line">y_values = [x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> x_values]</span><br><span class="line"></span><br><span class="line"><span class="comment">#change</span></span><br><span class="line">plt.scatter(x_values,y_values,c=y_values,cmap=plt.cm.Blues,</span><br><span class="line">           edgecolor=<span class="string">'none'</span>,s=<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置图表标题并给坐标轴加上标签</span></span><br><span class="line">plt.title(<span class="string">"Square Numbers"</span>,fontsize=<span class="number">24</span>)</span><br><span class="line">plt.xlabel(<span class="string">"Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">"Square of Value"</span>,fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置刻度标记的大小</span></span><br><span class="line">plt.tick_params(axis=<span class="string">'both'</span>,which=<span class="string">'major'</span>,labelsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置每个坐标轴的取值范围</span></span><br><span class="line">plt.axis([<span class="number">0</span>,<span class="number">1100</span>,<span class="number">0</span>,<span class="number">1100000</span>])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>我们将参数c设置成了一个y值列表，并使用<strong>参数cmap告诉pyplot使用哪个颜色映射。</strong>将较小的点设置成浅蓝色，较深的点设置成深蓝色。</p>
<p><img data-src="/images/Python-base/DataView_8.png" alt="屏幕快照 2017-09-19 下午4.58.54"></p>
<h3 id="自动保存图表"><a href="#自动保存图表" class="headerlink" title="自动保存图表"></a>自动保存图表</h3><p>让程序自动将图表保存到文件中，可将对plt.show()的调用替换为对plt.savefig()的调用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.savefig(<span class="string">'squares_plot.png'</span>,bbox_inches=<span class="string">'tight'</span>)</span><br></pre></td></tr></table></figure>

<p>第一个实参指定要以什么样的文件名保存图表，这个文件存储到当前程序所在的目录中。第二个实参指定将图表多余的空白区域裁剪掉。如果要保留图表周围空白的区域，可省略这个实参。</p>
<h2 id="随机漫步"><a href="#随机漫步" class="headerlink" title="随机漫步"></a>随机漫步</h2><p>我们使用python来生成随机漫步数据，再使用matplotlib以引人瞩目的方式将这些数据呈现出来。</p>
<p><strong>随机漫步数据</strong>是这样行走得到的路径：每次行走都是完全随机的，没有明确的方向，结果是由一系列随机决策决定的。在自然界、物理学、生物学、化学和经济领域，随机漫步都有其实际用途。例如，漂浮在水面上的花粉因不断受到水分子的挤压而在水面上移动。花粉在水面上的运动轨迹犹如随机漫步。</p>
<h3 id="创建RandomWalk-类"><a href="#创建RandomWalk-类" class="headerlink" title="创建RandomWalk()类"></a>创建RandomWalk()类</h3><p>为模拟随机漫步，我们将创建一个名为RandomWalk的类，它随机的选择前进方向。</p>
<p>这个类需要三个属性，其中一个是存储随机漫步的次数的变量，其他两个是列表，分别存储随机漫步经过的每个点的x和y坐标。包含两个方法：<em>_init()</em>,fill_walk(),其中后者计算随机漫步经过的所有点。</p>
<p>下面是init方法。（random_walk.py）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWalk</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""一个生成随机漫步数据的类"""</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,num_points=<span class="number">5000</span>)</span>:</span></span><br><span class="line">        <span class="string">"""初始化随机漫步的属性"""</span></span><br><span class="line">        self.num_points = num_points</span><br><span class="line">        </span><br><span class="line">        <span class="comment">#所有随机漫步都始于（0，0）</span></span><br><span class="line">        self.x_values = [<span class="number">0</span>]</span><br><span class="line">        self.y_values = [<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<p>我们将所有的可能都存储在一个列表中，并在每次做决策时都使用choice()来决定使用哪种选择。我们将随机漫步包含的默认点数设置为5000。</p>
<h3 id="选择方向"><a href="#选择方向" class="headerlink" title="选择方向"></a>选择方向</h3><p>使用fill_walk()来生成漫步包含的点，并决定每次漫步的方向。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fill_walk</span><span class="params">(self)</span>:</span></span><br><span class="line">       <span class="string">"""计算随机漫步包含的所有的点"""</span></span><br><span class="line">       </span><br><span class="line">       <span class="comment">#不断漫步，直到列表达到指定的长度</span></span><br><span class="line">       <span class="keyword">while</span> len(self.x_values) &lt; self.num_points:</span><br><span class="line">            <span class="comment">#决定前进的方向以及沿这个方向前进的距离</span></span><br><span class="line">               x_direction = choice([<span class="number">-1</span>,<span class="number">1</span>])</span><br><span class="line">               x_distance = choice([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">               x_step = x_direction * x_distance</span><br><span class="line">               </span><br><span class="line">               y_direction = choice([<span class="number">-1</span>,<span class="number">1</span>])</span><br><span class="line">               y_distance = choice([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">               y_step = y_direction * y_distance</span><br><span class="line">               </span><br><span class="line">               <span class="comment">#拒绝原地踏步</span></span><br><span class="line">               <span class="keyword">if</span> x_step == <span class="number">0</span> <span class="keyword">and</span> y_step == <span class="number">0</span>:</span><br><span class="line">                   <span class="keyword">continue</span></span><br><span class="line">                   </span><br><span class="line">               <span class="comment">#计算下一个点的x和y值</span></span><br><span class="line">               next_x = self.x_values[<span class="number">-1</span>] + x_step</span><br><span class="line">               next_y = self.Y_values[<span class="number">-1</span>] + y_step</span><br><span class="line">               </span><br><span class="line">               self.x_values.append(next_x)</span><br><span class="line">               self.y_values.append(next_y)</span><br></pre></td></tr></table></figure>

<p> 方法choice([-1,1])将在-1，1表示在两者之间随机选择一个数。choice([0,1,2,3,4])是在这5个数中间随机选择一个数字，之所以包含0是因为可能点要沿垂直的方向行动。x_step与y_step是最终的步长，x_values[-1]，Y_values[-1]取到列表的最后一个元素，它们也用来保存最新行动的点，即append()方法。</p>
<h3 id="绘制随机漫步图"><a href="#绘制随机漫步图" class="headerlink" title="绘制随机漫步图"></a>绘制随机漫步图</h3><p>（rw_visual.py）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> 　random_walk <span class="keyword">import</span> RandomWalk</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个RandomWalk实例，并将其包含的点都绘制出来</span></span><br><span class="line">rw = RandomWalk()</span><br><span class="line">rw.fill_walk()</span><br><span class="line">plt.scatter(rw.x_values,rw.y_values,s=<span class="number">15</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>创建RandomWalk的实例rw，再调用fill_walk()。然后将实例中产生的x_values和y_values赋值给scatter()函数。</p>
<p>下图是包含5000个点的随机漫步图。</p>
<p><img data-src="/images/Python-base/DataView_9.png" alt="屏幕快照 2017-09-21 上午10.29.43"></p>
<h3 id="设置随机漫步图样式"><a href="#设置随机漫步图样式" class="headerlink" title="设置随机漫步图样式"></a>设置随机漫步图样式</h3><p>我们将定制图表，以突出每次漫步的重要特征，并让分散注意力的元素不那么显眼。最终的结果是简单的可视化表示，清楚地指出了每次漫步经过的路径。</p>
<h3 id="给点着色"><a href="#给点着色" class="headerlink" title="给点着色"></a>给点着色</h3><p>我们使用颜色映射来指出漫步中各点的先后顺序，并删除每个点的黑色轮廓。我们传递参数c，并将其设置为一个列表，其中包含各点的先后顺序。由于这些点是按照顺序绘制的，因此给参数c指定列表只需包含数字1～5000。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">point_numbers = list(range(rw.num_points))</span><br><span class="line">plt.scatter(rw.x_values,rw.y_values,c=point_numbers,cmap=plt.cm.Blues,edgecolor=<span class="string">'none'</span>,s=<span class="number">15</span>)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_10.png" alt="屏幕快照 2017-09-21 上午11.14.58"></p>
<h3 id="重新绘制起点和终点"><a href="#重新绘制起点和终点" class="headerlink" title="重新绘制起点和终点"></a>重新绘制起点和终点</h3><p>除了给随机漫步的各个点着色，以指出它们的先后顺序外，如果还能呈现随机漫步的起点和终点就更好了。为此，可在绘制随机漫步图后重新绘制起点和终点。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#突出起点和终点</span></span><br><span class="line">plt.scatter(<span class="number">0</span>,<span class="number">0</span>,c=<span class="string">'green'</span>,edgecolors=<span class="string">'none'</span>,s=<span class="number">100</span>)</span><br><span class="line">plt.scatter(rw.x_values[<span class="number">-1</span>],rw.y_values[<span class="number">-1</span>],c=<span class="string">'red'</span>,edgecolors=<span class="string">'none'</span>,</span><br><span class="line">            s=<span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_11.png" alt="屏幕快照 2017-09-21 下午12.33.14"></p>
<h3 id="隐藏坐标轴"><a href="#隐藏坐标轴" class="headerlink" title="隐藏坐标轴"></a>隐藏坐标轴</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#隐藏坐标轴</span></span><br><span class="line">plt.axes().get_xaxis().set_visible(<span class="literal">False</span>)</span><br><span class="line">plt.axes().get_yaxis().set_visible(<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>



<h3 id="增加点数"><a href="#增加点数" class="headerlink" title="增加点数"></a>增加点数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rw = RandomWalk(<span class="number">50000</span>)</span><br></pre></td></tr></table></figure>



<h3 id="调整屏幕以适应屏幕"><a href="#调整屏幕以适应屏幕" class="headerlink" title="调整屏幕以适应屏幕"></a>调整屏幕以适应屏幕</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置绘图窗口的尺寸</span></span><br><span class="line">plt.figure(dpi=<span class="number">227</span>,figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br></pre></td></tr></table></figure>

<p>函数figure()用于指定图表的宽度、高度、分辨率和背景色。你需要给figsize指定一个元组，单位为英寸。Python假定屏幕的分辨率为80像素／英寸，可利用形参dip向figure()传递该分辨率，有效的利用屏幕空间。</p>
<p><img data-src="/images/Python-base/DataView_12.png" alt="屏幕快照 2017-09-21 下午1.00.20 1"></p>
<h2 id="使用Pygal模拟掷骰子"><a href="#使用Pygal模拟掷骰子" class="headerlink" title="使用Pygal模拟掷骰子"></a>使用Pygal模拟掷骰子</h2><p>我们将使用Python<strong>可视化包Pygal</strong>来生成<strong>可缩放的矢量图形文件</strong>。对于需要在尺寸不同的屏幕上显示的图表，这很有用，它们会自动缩放。如果你打算以在线方式使用图表，请考虑使用Pygal来生成它们，这样它们在任何设备上显示时都会很美观。</p>
<p>如果掷两个骰子，为确定哪些点数出现的可能性最大，我们将生成一个表示掷骰子结果的数据集，并根据结果绘制出一个图形。</p>
<h3 id="安装Pygal"><a href="#安装Pygal" class="headerlink" title="安装Pygal"></a>安装Pygal</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install --user pygal==<span class="number">1.7</span></span><br></pre></td></tr></table></figure>



<h3 id="Pygal画廊"><a href="#Pygal画廊" class="headerlink" title="Pygal画廊"></a>Pygal画廊</h3><p>要了解使用Pygal可创建什么样的图表，可查看图表类型画廊， <a href="http://www.pygal.org/,单击Documentation，再单击Chart" target="_blank" rel="noopener">http://www.pygal.org/,单击Documentation，再单击Chart</a> types。每个示例都包含源代码。</p>
<h3 id="掷单个骰子"><a href="#掷单个骰子" class="headerlink" title="掷单个骰子"></a>掷单个骰子</h3><ul>
<li><p>创建Die类</p>
<p>下面的类模拟掷一个骰子。die.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Die</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""表示一个骰子的类"""</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,num_sides=<span class="number">6</span>)</span>:</span></span><br><span class="line">        <span class="string">"""骰子默认为6面"""</span></span><br><span class="line">        self.num_sides = num_sides</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">roll</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""返回一个位于1和骰子面数之间的随机值"""</span></span><br><span class="line">        <span class="keyword">return</span> randint(<span class="number">1</span>,self.num_sides)</span><br></pre></td></tr></table></figure>

<p>创建这个类的实例时，骰子默认面为6，如果指定了参数，这个值将用于设置骰子的面数，6面为D6，8面为D8，以此类推。方法roll()使用<strong>函数randint()</strong>来返回一个1和面数<strong>之间的随机数</strong>。这个函数可能返回起始值1，终止值num_sides或者这两个值之间的<strong>任何整数</strong>。（<strong>choice()返回列表列出的随机数）</strong></p>
</li>
</ul>
<ul>
<li><p>掷骰子</p>
<p>掷D6骰子，将结果打印出来，并检查结果是否合理。die_visual.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> die <span class="keyword">import</span> Die</span><br><span class="line"><span class="comment">#创建一个D6</span></span><br><span class="line">die = Die()</span><br><span class="line"></span><br><span class="line"><span class="comment">#掷100次骰子，并将结果存储在一个列表中</span></span><br><span class="line">results = []</span><br><span class="line"><span class="keyword">for</span> roll_num <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">    result = die.roll()</span><br><span class="line">    results.append(result)</span><br><span class="line"></span><br><span class="line">print(results)</span><br><span class="line"></span><br><span class="line">[<span class="number">6</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>分析结果</p>
<p>分析掷一个D6骰子的结果，我们计算每个点数出现的次数。<strong>range()为1~num_sides</strong></p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#分析结果</span></span><br><span class="line">frequencies = []</span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> range(<span class="number">1</span>,die.num_sides+<span class="number">1</span>):</span><br><span class="line">    frequency = results.count(value)</span><br><span class="line">    frequencies.append(frequency)</span><br><span class="line"></span><br><span class="line">[<span class="number">14</span>, <span class="number">18</span>, <span class="number">23</span>, <span class="number">12</span>, <span class="number">18</span>, <span class="number">15</span>]</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>绘制直方图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pygal</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> die <span class="keyword">import</span> Die</span><br><span class="line">--snip--</span><br><span class="line"></span><br><span class="line"><span class="comment">#对结果进行可视化</span></span><br><span class="line">hist = pygal.Bar()</span><br><span class="line"></span><br><span class="line">hist.title = <span class="string">"Results of rolling one D6 100 times."</span></span><br><span class="line">hist.x_labels = [<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'3'</span>,<span class="string">'4'</span>,<span class="string">'5'</span>,<span class="string">'6'</span>]</span><br><span class="line">hist.x_title = <span class="string">'Result'</span></span><br><span class="line">hist.y_title = <span class="string">'Frequency of Result'</span></span><br><span class="line"></span><br><span class="line">hist.add(<span class="string">'D6'</span>,frequencies)</span><br><span class="line">hist.render_to_file(<span class="string">'die_visual.svg'</span>)</span><br></pre></td></tr></table></figure>

<p>add()将一系列值添加到图表中（向它传递要给添加的值指定的标签，还有一个列表），最后，我们将这个图表渲染为一个SVG文件，这种文件的扩展名必须为.svg。</p>
<p>要查看生成的直方图，使用浏览器，新建标签页，在其中打开文件die _visual.svg，它位于其所在的文件夹内</p>
</li>
</ul>
<p><img data-src="/images/Python-base/DataView_13.png" alt="屏幕快照 2017-09-21 下午2.24.19"></p>
<h3 id="同时掷两个骰子"><a href="#同时掷两个骰子" class="headerlink" title="同时掷两个骰子"></a>同时掷两个骰子</h3><p>同时掷两个骰子时，得到的点数更多，结果分布也不同。每次掷两个骰子时，我们将两个骰子点数相加，并将结果存在results中。(dice_visual.py)(以下是部分代码，其他自行修改)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> roll_num <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">    result = die_1.roll() + die_2.roll()</span><br><span class="line">    results.append(result)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_14.png" alt="屏幕快照 2017-09-21 下午3.06.28"></p>
<h1 id="下载数据"><a href="#下载数据" class="headerlink" title="下载数据"></a>下载数据</h1><p>在本章中，将从网上下载数据，并对这些数据进行可视化。两种常见格式存储的数据：<strong>CSV 和 JSON。</strong>我们将使用Python模块csv来处理CSV数据（逗号分隔的值）。然后，使用matplotlib根据下载的数据创建一个图表。这两者我们用来分析天气数据，找出不同地区在同一时间内的最高温和最低温。</p>
<p>使用模块json来访问以JSON格式存储的人口数据，并使用Pygal绘制一幅按国别划分的人口地图。</p>
<h2 id="CSV文件格式"><a href="#CSV文件格式" class="headerlink" title="CSV文件格式"></a>CSV文件格式</h2><p>要在文本文件中存储数据，最简单的方式是将数据作为一系列<strong>以逗号分隔的值（CSV）</strong>写入文件。这样的文件称为CSV文件。例如：下面是一行CSV格式的天气数据：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2014</span><span class="number">-1</span><span class="number">-5</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">14</span>,<span class="number">23</span>,<span class="number">34</span>,<span class="number">6</span>,<span class="number">32</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">30</span>,<span class="number">29</span></span><br></pre></td></tr></table></figure>

<p>CSV文件对人来说阅读起来比较麻烦，但程序可轻松地提取并处理其中的值，这有助于加快数据分析过程。</p>
<p>将少量锡特卡的CSV格式的天气预报数据（sitka_weather_07-2014.csv）下载到当前文件夹中。</p>
<h3 id="分析CSV文件头"><a href="#分析CSV文件头" class="headerlink" title="分析CSV文件头"></a>分析CSV文件头</h3><p>csv模块包含在Python标准库中，可用于分析CSV文件中的数据行，让我们能快速提取感兴趣的值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line">filename = <span class="string">'sitka_weather_07-2014.csv'</span></span><br><span class="line"><span class="keyword">with</span> open(filename) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.reader(f)</span><br><span class="line">    header_row = next(reader)</span><br><span class="line">    print(header_row)</span><br><span class="line">    </span><br><span class="line">[<span class="string">'AKDT'</span>, <span class="string">'Max TemperatureF'</span>, <span class="string">'Mean TemperatureF'</span>, <span class="string">'Min TemperatureF'</span>, <span class="string">'Max Dew PointF'</span>, <span class="string">'MeanDew PointF'</span>, <span class="string">'Min DewpointF'</span>, <span class="string">'Max Humidity'</span>, <span class="string">' Mean Humidity'</span>, <span class="string">' Min Humidity'</span>, <span class="string">' Max Sea Level PressureIn'</span>, <span class="string">' Mean Sea Level PressureIn'</span>, <span class="string">' Min Sea Level PressureIn'</span>, <span class="string">' Max VisibilityMiles'</span>, <span class="string">' Mean VisibilityMiles'</span>, <span class="string">' Min VisibilityMiles'</span>, <span class="string">' Max Wind SpeedMPH'</span>, <span class="string">' Mean Wind SpeedMPH'</span>, <span class="string">' Max Gust SpeedMPH'</span>, <span class="string">'PrecipitationIn'</span>, <span class="string">' CloudCover'</span>, <span class="string">' Events'</span>, <span class="string">' WindDirDegrees'</span>]</span><br></pre></td></tr></table></figure>

<p>调用csv.reader()将前面存储的文件对象作为实参传递给它，从而创建一个与该文件相关联的<strong>阅读器reader对象</strong>。将阅读器存储在reader中。<strong>模块cav包含函数next()</strong>,调用它将返回文件中的下一行。</p>
<p>reader处理文件中以逗号分隔的第一行数据，并将每个数据项都作为一个元素存储在列表中。</p>
<h3 id="打印文件头及其位置"><a href="#打印文件头及其位置" class="headerlink" title="打印文件头及其位置"></a>打印文件头及其位置</h3><p>我们将文件头及其位置打印出来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line">filename = <span class="string">'sitka_weather_07-2014.csv'</span></span><br><span class="line"><span class="keyword">with</span> open(filename) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.reader(f)</span><br><span class="line">    header_row = next(reader)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> index,colum_header <span class="keyword">in</span> enumerate(header_row):</span><br><span class="line">        print(index,colum_header)</span><br><span class="line">        </span><br><span class="line"><span class="number">0</span> AKDT</span><br><span class="line"><span class="number">1</span> Max TemperatureF</span><br><span class="line"><span class="number">2</span> Mean TemperatureF</span><br><span class="line"><span class="number">3</span> Min TemperatureF</span><br><span class="line"><span class="number">4</span> Max Dew PointF</span><br><span class="line">.......</span><br></pre></td></tr></table></figure>

<p>我们对列表调用了enumerate()来获取每个元素的索引及其值。从中可知，日期和最高气温分别存储在第0列和第一列。我们将处理文件中的每行数据，并提取其中索引为0和1的值。</p>
<h3 id="提取并读取数据"><a href="#提取并读取数据" class="headerlink" title="提取并读取数据"></a>提取并读取数据</h3><p>首先读取每天的最高气温。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line">filename = <span class="string">'sitka_weather_07-2014.csv'</span></span><br><span class="line"><span class="keyword">with</span> open(filename) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.reader(f)</span><br><span class="line">    header_row = next(reader)</span><br><span class="line">    </span><br><span class="line">    highs = []</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> reader:</span><br><span class="line">        highs.append(row[<span class="number">1</span>])</span><br><span class="line">        </span><br><span class="line">    print(highs)</span><br><span class="line"></span><br><span class="line">[<span class="string">'64'</span>, <span class="string">'71'</span>, <span class="string">'64'</span>, <span class="string">'59'</span>, <span class="string">'69'</span>, <span class="string">'62'</span>, <span class="string">'61'</span>, <span class="string">'55'</span>, <span class="string">'57'</span>, <span class="string">'61'</span>, <span class="string">'57'</span>, <span class="string">'59'</span>, <span class="string">'57'</span>, <span class="string">'61'</span>, <span class="string">'64'</span>, <span class="string">'61'</span>, <span class="string">'59'</span>, <span class="string">'63'</span>, <span class="string">'60'</span>, <span class="string">'57'</span>, <span class="string">'69'</span>, <span class="string">'63'</span>, <span class="string">'62'</span>, <span class="string">'59'</span>, <span class="string">'57'</span>, <span class="string">'57'</span>, <span class="string">'61'</span>, <span class="string">'59'</span>, <span class="string">'61'</span>, <span class="string">'61'</span>, <span class="string">'66'</span>]</span><br></pre></td></tr></table></figure>

<p>阅读器对象从其停留的地方继续往下读取csv文件，每次都自动返回当前所处位置的下一行。由于我们之前已经读取了文件头，这个循环将从第二行开始。</p>
<p>我们使用int()将这些字符串转化为数字，让matplotlib能够读取它们。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> highs.append(int(row[<span class="number">1</span>])</span><br><span class="line"> </span><br><span class="line">[<span class="number">64</span>, <span class="number">71</span>, <span class="number">64</span>, <span class="number">59</span>, <span class="number">69</span>, <span class="number">62</span>, <span class="number">61</span>, <span class="number">55</span>, <span class="number">57</span>, <span class="number">61</span>, <span class="number">57</span>, <span class="number">59</span>, <span class="number">57</span>, <span class="number">61</span>, <span class="number">64</span>, <span class="number">61</span>, <span class="number">59</span>, <span class="number">63</span>, <span class="number">60</span>, <span class="number">57</span>, <span class="number">69</span>, <span class="number">63</span>, <span class="number">62</span>, <span class="number">59</span>, <span class="number">57</span>, <span class="number">57</span>, <span class="number">61</span>, <span class="number">59</span>, <span class="number">61</span>, <span class="number">61</span>, <span class="number">66</span>]</span><br></pre></td></tr></table></figure>



<h3 id="绘制气温图表"><a href="#绘制气温图表" class="headerlink" title="绘制气温图表"></a>绘制气温图表</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">file_name = <span class="string">'sitka_weather_07-2014.csv'</span></span><br><span class="line"><span class="keyword">with</span> open(file_name) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.reader(f)</span><br><span class="line">    header_row = next(reader)</span><br><span class="line">    </span><br><span class="line">    highs = []</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> reader:</span><br><span class="line">        highs.append(int(row[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#根据数据绘制图形</span></span><br><span class="line">fig = plt.figure(dpi=<span class="number">128</span>,figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line">plt.plot(highs,c=<span class="string">'red'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置图形的格式</span></span><br><span class="line">plt.title(<span class="string">"Daily high temperature,July 2014"</span>,fontsize=<span class="number">24</span>)</span><br><span class="line">plt.xlabel(<span class="string">''</span>,fontsize=<span class="number">16</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Temperature(F),fontsize=16'</span>)</span><br><span class="line">plt.tick_params(axis=<span class="string">'both'</span>,which=<span class="string">'major'</span>,labelsize=<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_15.png" alt="屏幕快照 2017-09-23 下午12.06.32"></p>
<h3 id="模块datetime"><a href="#模块datetime" class="headerlink" title="模块datetime"></a>模块datetime</h3><p>在天气数据文件中，第一个日期在第二行。地区该行时，获取的是一个字符串，因为我们需要将字符串“2014-7-1“转换为一个表示相应日期的对象。<strong>可使用模块datetime中的方法strptime()。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">first_date = datetime.strptime(<span class="string">'2014-7-1'</span>,<span class="string">'%Y-%m-%d'</span>)</span><br><span class="line">print(first_date)</span><br><span class="line"></span><br><span class="line"><span class="number">2014</span><span class="number">-07</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br></pre></td></tr></table></figure>

<p>“%Y-“让Python将字符串中<strong>第一个连字符前面的部分</strong>视为四位的年份。strptime()可接受实参,并根据其解读日期。</p>
<table>
<thead>
<tr>
<th align="center">实       参</th>
<th align="center">含         义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%A</td>
<td align="center">星期的名称，如Monday</td>
</tr>
<tr>
<td align="center">%B</td>
<td align="center">月份，如January</td>
</tr>
<tr>
<td align="center">%m</td>
<td align="center">用数字表示的月份，（01～12）</td>
</tr>
<tr>
<td align="center">%d</td>
<td align="center">用数字表示月份中的一天，（01～31）</td>
</tr>
<tr>
<td align="center">%Y</td>
<td align="center">四位的年份，如2015</td>
</tr>
<tr>
<td align="center">%y</td>
<td align="center">两位的年份，如15</td>
</tr>
<tr>
<td align="center">%H</td>
<td align="center">24小时制的小时数（00～23）</td>
</tr>
<tr>
<td align="center">%I</td>
<td align="center">12小时制的小时数（01～12）</td>
</tr>
<tr>
<td align="center">%p</td>
<td align="center">am或pm</td>
</tr>
<tr>
<td align="center">%M</td>
<td align="center">分钟数（00～59）</td>
</tr>
<tr>
<td align="center">%S</td>
<td align="center">秒数（00～59）</td>
</tr>
</tbody></table>
<h3 id="在图表中添加日期"><a href="#在图表中添加日期" class="headerlink" title="在图表中添加日期"></a>在图表中添加日期</h3><p>调用fig.autofmt_xdate()来绘制斜的日期标签，以免它们彼此重叠。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">file_name = <span class="string">'sitka_weather_07-2014.csv'</span></span><br><span class="line"><span class="keyword">with</span> open(file_name) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.reader(f)</span><br><span class="line">    header_row = next(reader)</span><br><span class="line">    </span><br><span class="line">    dates,highs = [],[]</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> reader:</span><br><span class="line">        current_date = datetime.strptime(row[<span class="number">0</span>],<span class="string">"%Y-%m-%d"</span>)</span><br><span class="line">        dates.append(current_date)</span><br><span class="line">        highs.append(int(row[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#根据数据绘制图形</span></span><br><span class="line">fig = plt.figure(dpi=<span class="number">128</span>,figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line">plt.plot(dates,highs,c=<span class="string">'red'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置图形的格式</span></span><br><span class="line">plt.title(<span class="string">"Daily high temperature,July 2014"</span>,fontsize=<span class="number">24</span>)</span><br><span class="line">plt.xlabel(<span class="string">''</span>,fontsize=<span class="number">16</span>)</span><br><span class="line">fig.autofmt_xdate()</span><br><span class="line">plt.ylabel(<span class="string">'Temperature(F),fontsize=16'</span>)</span><br><span class="line">plt.tick_params(axis=<span class="string">'both'</span>,which=<span class="string">'major'</span>,labelsize=<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_16.png" alt="屏幕快照 2017-09-23 下午2.02.28"></p>
<h3 id="最高与最低气温"><a href="#最高与最低气温" class="headerlink" title="最高与最低气温"></a>最高与最低气温</h3><p>导入”sitka_weather_2014.csv”数据，它记录了sitka地区整年的气温变化，我们观察最高与最低气温。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">xiaimport csv</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">file_name = <span class="string">'sitka_weather_2014.csv'</span></span><br><span class="line"><span class="keyword">with</span> open(file_name) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.reader(f)</span><br><span class="line">    header_row = next(reader)</span><br><span class="line">    </span><br><span class="line">    dates,highs,lows = [],[],[]</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> reader:</span><br><span class="line">        current_date = datetime.strptime(row[<span class="number">0</span>],<span class="string">"%Y-%m-%d"</span>)</span><br><span class="line">        dates.append(current_date)</span><br><span class="line">        highs.append(int(row[<span class="number">1</span>]))</span><br><span class="line">        lows.append(int(row[<span class="number">3</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#根据数据绘制图形</span></span><br><span class="line">fig = plt.figure(dpi=<span class="number">128</span>,figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line">plt.plot(dates,highs,c=<span class="string">'red'</span>)</span><br><span class="line">plt.plot(dates,lows,c=<span class="string">'blue'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置图形的格式</span></span><br><span class="line">plt.title(<span class="string">"Daily high and low temperature,2014"</span>,fontsize=<span class="number">24</span>)</span><br><span class="line">plt.xlabel(<span class="string">''</span>,fontsize=<span class="number">16</span>)</span><br><span class="line">fig.autofmt_xdate()</span><br><span class="line">plt.ylabel(<span class="string">'Temperature(F),fontsize=16'</span>)</span><br><span class="line">plt.tick_params(axis=<span class="string">'both'</span>,which=<span class="string">'major'</span>,labelsize=<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_17.png" alt="屏幕快照 2017-09-23 下午2.28.54"></p>
<p>下面给图表区域着色。使用fill_between()，它接受一个x值与y值系列，并填充两个y值系列之间的空间。<strong>alpha</strong>指定颜色的透明度。Alpha=0表示完全透明，1完全不透明。fill_between()传递了一个x值系列：列表dates，还传递了两个y值系列：highs和lows。facecolor指定了填充区域的颜色。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#根据数据绘制图形</span></span><br><span class="line">fig = plt.figure(dpi=<span class="number">128</span>,figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line">plt.plot(dates,highs,c=<span class="string">'red'</span>,alpha=<span class="number">0.5</span>)</span><br><span class="line">plt.plot(dates,lows,c=<span class="string">'blue'</span>,alpha=<span class="number">0.5</span>)</span><br><span class="line">plt.fill_between(dates,highs,lows,facecolor=<span class="string">'blue'</span>,alpha=<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_18.png" alt="屏幕快照 2017-09-23 下午2.39.56"></p>
<h3 id="错误检查"><a href="#错误检查" class="headerlink" title="错误检查"></a>错误检查</h3><p>数据的缺失可能引发异常，例如我们导入死亡谷的气温数据“death_valley_2014.csv”，并且运行上述代码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ValueError: invalid literal <span class="keyword">for</span> int() <span class="keyword">with</span> base <span class="number">10</span>: <span class="string">''</span></span><br></pre></td></tr></table></figure>

<p>结果显示，无法处理文件中的一行数据，因为它无法将空字符串转化为整数。我们打开文件，发现其中没有记录2014-2-16的数据，最高气温的字符串为空。</p>
<p>我们在csv文件中读取值时执行错误检查代码，<strong>对分析数据集时可能出现的异常进行处理。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">--snip--</span><br><span class="line">dates,highs,lows = [],[],[]</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> reader:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            current_date = datetime.strptime(row[<span class="number">0</span>],<span class="string">"%Y-%m-%d"</span>)</span><br><span class="line">            high = int(row[<span class="number">1</span>])</span><br><span class="line">            low = int(row[<span class="number">3</span>])</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            print(current_date,<span class="string">'missing data'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dates.append(current_date)</span><br><span class="line">            highs.append(high)</span><br><span class="line">            lows.append(low)</span><br><span class="line">--snip--</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_19.png" alt="屏幕快照 2017-09-23 下午3.04.05"></p>
<p>可以看到，有一个数据没有读到。其他正常显示。</p>
<!--more-->

<h2 id="制作世界人口地图：JSON格式"><a href="#制作世界人口地图：JSON格式" class="headerlink" title="制作世界人口地图：JSON格式"></a>制作世界人口地图：JSON格式</h2><p>Pygal提供了一个适合初学者使用的地图创建工具，使用它对人口数据进行可视化，以探索全球人口的分布情况。</p>
<p>文件population_data.json中包含全球大部分国家1960～2010的人口数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"Country Name"</span>: <span class="string">"Arab World"</span>,</span><br><span class="line">    <span class="string">"Country Code"</span>: <span class="string">"ARB"</span>,</span><br><span class="line">    <span class="string">"Year"</span>: <span class="string">"1960"</span>,</span><br><span class="line">    <span class="string">"Value"</span>: <span class="string">"96388069"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"Country Name"</span>: <span class="string">"Arab World"</span>,</span><br><span class="line">    <span class="string">"Country Code"</span>: <span class="string">"ARB"</span>,</span><br><span class="line">    <span class="string">"Year"</span>: <span class="string">"1961"</span>,</span><br><span class="line">    <span class="string">"Value"</span>: <span class="string">"98882541.4"</span></span><br><span class="line">  &#125;,</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>这个文件实际上就是一个很长的Python列表，其中每个元素都是一个包含4个键的字典。国家名、国别码、年份、以及人口数量。</p>
<p>我们只关心人口数量。因此先将这些信息打印出来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment">#将数据加载到一个列表中</span></span><br><span class="line">file_name = <span class="string">'population_data.json'</span></span><br><span class="line"><span class="keyword">with</span> open(file_name) <span class="keyword">as</span> f:</span><br><span class="line">    pop_data = json.load(f)</span><br><span class="line"></span><br><span class="line"><span class="comment">#打印每个国家2010年的人口数量</span></span><br><span class="line"><span class="keyword">for</span> pop_dict <span class="keyword">in</span> pop_data:</span><br><span class="line">    <span class="keyword">if</span> pop_dict[<span class="string">'Year'</span>] == <span class="string">'2010'</span>:</span><br><span class="line">        country_name = pop_dict[<span class="string">'Country Name'</span>]</span><br><span class="line">        population = pop_dict[<span class="string">'Value'</span>]</span><br><span class="line">        print(country_name + <span class="string">":"</span> + population)</span><br><span class="line"></span><br><span class="line">Arab World:<span class="number">357868000</span></span><br><span class="line">Caribbean small states:<span class="number">6880000</span></span><br><span class="line">East Asia &amp; Pacific (all income levels):<span class="number">2201536674</span></span><br><span class="line">East Asia &amp; Pacific (developing only):<span class="number">1961558757</span></span><br><span class="line">Euro area:<span class="number">331766000</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>首先导入了json模块，以便正确的加载文件中的数据。然后将数据存储在pop_data中。函数pop_data 将数据转换为Python能够处理的格式，这里是一个列表。</p>
<p>可以看到，捕捉的数据中，并非每个都是国家名，现在将数据转换为Pygal能够处理的格式。</p>
<p>注意：将str转换为int时，若使用str(),如果数字（人口数量）为小数，则会发生错误，<strong>因为Python不能将包含小数点的字符串（如：“10.984958”）转化为整数。</strong></p>
<p><strong>应该先将其字符串转换为浮点数float()，再将浮点数转化为整数int()。</strong>Python会自动抛弃小数部分。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">population = int(float(pop_dict[<span class="string">'Value'</span>]))</span><br><span class="line">print(country_name + <span class="string">":"</span> + str(population))</span><br></pre></td></tr></table></figure>



<h3 id="获取两个字母的国别码"><a href="#获取两个字母的国别码" class="headerlink" title="获取两个字母的国别码"></a>获取两个字母的国别码</h3><p>population_data.json中包含的是三个字母的国别码，但Pygal使用两个字母的国别码。我们需要根据国家名获取两个字母的国别码。Pygal使用的国别码存储在模块i8n中。字典COUNTRIES包含的键和值分别是两个字母的国别码和国家名。要查看，可导入。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pygal.i18n <span class="keyword">import</span> COUNTRIES</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>  country_code <span class="keyword">in</span> sorted(COUNTRIES.keys()):</span><br><span class="line">    print(country_code,COUNTRIES[country_code])</span><br><span class="line"></span><br><span class="line">ad Andorra</span><br><span class="line">ae United Arab Emirates</span><br><span class="line">af Afghanistan</span><br><span class="line">al Albania</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>为获取国别码，编写一个函数，它在COUNTRIES中查找并返回国别码。（country_codes.py）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pygal.i18n <span class="keyword">import</span> COUNTRIES</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_country_code</span><span class="params">(country_name)</span>:</span></span><br><span class="line">    <span class="string">"""根据指定的国家，返回Pygal使用的两个字母的国别码"""</span></span><br><span class="line">    <span class="keyword">for</span> code,name <span class="keyword">in</span> COUNTRIES.items():</span><br><span class="line">        <span class="keyword">if</span> name == country_name:</span><br><span class="line">            <span class="keyword">return</span> code</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure>

<p>在之前的代码中导入。(world_population.py)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> country_codes <span class="keyword">import</span> get_country_code</span><br><span class="line"></span><br><span class="line"><span class="comment">#将数据加载到一个列表中</span></span><br><span class="line">file_name = <span class="string">'population_data.json'</span></span><br><span class="line"><span class="keyword">with</span> open(file_name) <span class="keyword">as</span> f:</span><br><span class="line">    pop_data = json.load(f)</span><br><span class="line"></span><br><span class="line"><span class="comment">#打印每个国家2010年的人口数量</span></span><br><span class="line"><span class="keyword">for</span> pop_dict <span class="keyword">in</span> pop_data:</span><br><span class="line">    <span class="keyword">if</span> pop_dict[<span class="string">'Year'</span>] == <span class="string">'2010'</span>:</span><br><span class="line">        country_name = pop_dict[<span class="string">'Country Name'</span>]</span><br><span class="line">        population = pop_dict[<span class="string">'Value'</span>]</span><br><span class="line">        code = get_country_code(country_name)</span><br><span class="line">        <span class="keyword">if</span> code:</span><br><span class="line">          print(code + <span class="string">":"</span> + str(population))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">          print(<span class="string">'ERROR -'</span> + country_name)</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">ERROR -Algeria</span><br><span class="line">ERROR -American Samoa</span><br><span class="line">ad:<span class="number">84864</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure>



<h3 id="制作世界地图"><a href="#制作世界地图" class="headerlink" title="制作世界地图"></a>制作世界地图</h3><p>有了国别码后，制作世界地图易如反掌。Pygal提供了图表类型WorldMap，可帮助你制作呈现世界各国数据的世界地图。为了呈现，我们来创建一个突出北美、中美和南美的简单地图。</p>
<p>我们创建了一个Worldmap实例，并设置了该地图的title属性。</p>
<p>使用add方法，它接受一个标签和一个列表，后者包含我们要突出的国家的<strong>国别码</strong>。每次调用add都将为指定的国家选择一种新颜色，并在左边显示该颜色和指定的标签。我们要以同一种颜色显示整个北美地区。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pygal</span><br><span class="line"></span><br><span class="line">wm = pygal.Worldmap()</span><br><span class="line">wm.title = <span class="string">'North,Central,and South America'</span></span><br><span class="line"></span><br><span class="line">wm.add(<span class="string">'North America'</span>,[<span class="string">'ca'</span>,<span class="string">'mx'</span>,<span class="string">'us'</span>])</span><br><span class="line">wm.add(<span class="string">'Central America'</span>,[<span class="string">'bz'</span>,<span class="string">'cr'</span>,<span class="string">'gt'</span>,<span class="string">'hn'</span>,<span class="string">'ni'</span>,<span class="string">'pa'</span>,<span class="string">'sv'</span>])</span><br><span class="line">wm.add(<span class="string">'South America'</span>,[<span class="string">'ar'</span>,<span class="string">'bo'</span>,<span class="string">'br'</span>,<span class="string">'cl'</span>,<span class="string">'co'</span>,<span class="string">'ec'</span>,<span class="string">'gf'</span>,</span><br><span class="line">                       <span class="string">'gy'</span>,<span class="string">'pe'</span>,<span class="string">'sr'</span>,<span class="string">'uy'</span>,<span class="string">'ve'</span>])</span><br><span class="line"></span><br><span class="line">wm.render_to_file(<span class="string">'americas.svg'</span>)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_20.png" alt="屏幕快照 2017-09-23 下午4.41.59"></p>
<h3 id="在世界地图上呈现数字数据"><a href="#在世界地图上呈现数字数据" class="headerlink" title="在世界地图上呈现数字数据"></a>在世界地图上呈现数字数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pygal</span><br><span class="line"></span><br><span class="line">wm = pygal.Worldmap()</span><br><span class="line">wm.title = <span class="string">'Population of Countries in North America'</span></span><br><span class="line">wm.add(<span class="string">'North America'</span>,&#123;<span class="string">'ca'</span>:<span class="number">34126000</span>,<span class="string">'us'</span>:<span class="number">30934900</span>,<span class="string">'mx'</span>:<span class="number">113423000</span>&#125;)</span><br><span class="line"></span><br><span class="line">wm.render_to_file(<span class="string">'na_populations.svg'</span>)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_21.png" alt="屏幕快照 2017-09-23 下午4.52.41"></p>
<p>这次的add方法，第二个参数传递的是一个字典而不是列表。这个字典将两个字母的Pygal国别码作为键，将人口数量作为值。Pygal根据这些数字自动给不同国家着以深浅不一的颜色（人口最少的国家颜色最浅，反之最深）</p>
<h3 id="绘制完整的世界人口地图"><a href="#绘制完整的世界人口地图" class="headerlink" title="绘制完整的世界人口地图"></a>绘制完整的世界人口地图</h3><p>在之前的world_population.py中添加如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pygal</span><br><span class="line"></span><br><span class="line"><span class="comment">#将数据加载到一个列表中</span></span><br><span class="line">file_name = <span class="string">'population_data.json'</span></span><br><span class="line"><span class="keyword">with</span> open(file_name) <span class="keyword">as</span> f:</span><br><span class="line">    pop_data = json.load(f)</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个包含人口数量的字典</span></span><br><span class="line">cc_populations = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#每个国家2010年的人口数量</span></span><br><span class="line"><span class="keyword">for</span> pop_dict <span class="keyword">in</span> pop_data:</span><br><span class="line">    <span class="keyword">if</span> pop_dict[<span class="string">'Year'</span>] == <span class="string">'2010'</span>:</span><br><span class="line">        country_name = pop_dict[<span class="string">'Country Name'</span>]</span><br><span class="line">        population = int(float(pop_dict[<span class="string">'Value'</span>]))</span><br><span class="line">        code = get_country_code(country_name)</span><br><span class="line">        <span class="keyword">if</span> code:</span><br><span class="line">            cc_populations[code] = population</span><br><span class="line"></span><br><span class="line">wm = pygal.Worldmap()</span><br><span class="line">wm.title = <span class="string">'World Population in 2010,by Country'</span></span><br><span class="line">wm.add(<span class="string">'2010'</span>,cc_populations)</span><br><span class="line"></span><br><span class="line">wm.render_to_file(<span class="string">'world_population.svg'</span>)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_22.png" alt="屏幕快照 2017-09-23 下午5.09.55"></p>
<p>我们将根据人口数量将国家分组，再分别给每个组着色。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">--snip--</span><br><span class="line"><span class="keyword">from</span> pygal.style <span class="keyword">import</span> LightColorizedStyle <span class="keyword">as</span> LCS, RotateStyle <span class="keyword">as</span> RS</span><br><span class="line">--snip--</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> code:</span><br><span class="line">  cc_populations[code] = population</span><br><span class="line"></span><br><span class="line"><span class="comment"># Group the countries into 3 population levels.</span></span><br><span class="line">cc_pops_1, cc_pops_2, cc_pops_3 = &#123;&#125;, &#123;&#125;, &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> cc, pop <span class="keyword">in</span> cc_populations.items():</span><br><span class="line">    <span class="keyword">if</span> pop &lt; <span class="number">10000000</span>:</span><br><span class="line">        cc_pops_1[cc] = pop</span><br><span class="line">    <span class="keyword">elif</span> pop &lt; <span class="number">1000000000</span>:</span><br><span class="line">        cc_pops_2[cc] = pop</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        cc_pops_3[cc] = pop</span><br><span class="line"></span><br><span class="line"><span class="comment"># See how many countries are in each level.        </span></span><br><span class="line">print(len(cc_pops_1), len(cc_pops_2), len(cc_pops_3))</span><br><span class="line"></span><br><span class="line">wm_style = RS(<span class="string">'# '</span>, base_style=LCS)</span><br><span class="line">wm = pygal.Worldmap(style=wm_style)</span><br><span class="line">wm.title = <span class="string">'World Population in 2010, by Country'</span></span><br><span class="line">wm.add(<span class="string">'0-10m'</span>, cc_pops_1)</span><br><span class="line">wm.add(<span class="string">'10m-1bn'</span>, cc_pops_2)</span><br><span class="line">wm.add(<span class="string">'&gt;1bn'</span>, cc_pops_3)</span><br><span class="line">    </span><br><span class="line">wm.render_to_file(<span class="string">'world_population.svg'</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">85</span> <span class="number">69</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_23.png" alt="屏幕快照 2017-09-23 下午5.31.20"></p>
<h3 id="用Pygal设置世界地图样式"><a href="#用Pygal设置世界地图样式" class="headerlink" title="用Pygal设置世界地图样式"></a>用Pygal设置世界地图样式</h3><p>我们让Pygal使用设置指令来调整颜色。让三个分组的颜色差别更大。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--snip--</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pygal.style <span class="keyword">import</span> RotateStyle</span><br><span class="line"></span><br><span class="line">--snip--</span><br><span class="line">wm_style = RotateStyle(<span class="string">'# '</span>)</span><br><span class="line">wm = pygal.Worldmap(style=wm_style)</span><br><span class="line"></span><br><span class="line">--snip--</span><br></pre></td></tr></table></figure>

<p>Pygal样式存储在模块style中，我们从中导入了RotateStyle样式。创建这个类的实例时，需要提供一个参数：16进制的RGB颜色；Pygal将根据指定的颜色为每组选择颜色。前两个字符表示红色分量，然后是绿色，蓝色。取值00～FF。建议搜索hex color chooser（16进制颜色选择器）</p>
<h3 id="加亮颜色主题"><a href="#加亮颜色主题" class="headerlink" title="加亮颜色主题"></a>加亮颜色主题</h3><p>我们使用LightColorizedStyle加亮了地图。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pygal.style <span class="keyword">import</span> LightColorizedStyle</span><br></pre></td></tr></table></figure>

<p>但是使用这个类时，你不能直接控制使用的颜色，Pygal将选择默认的基色。要设置颜色，可使用RotateStyle，并将LightColorizedStyle作为基本样式。为此</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pygal.style <span class="keyword">import</span> LightColorizedStyle <span class="keyword">as</span> LCS,RotateStyle <span class="keyword">as</span> RS</span><br></pre></td></tr></table></figure>

<p>再使用RotateStyle创建一种样式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wm_style = RS(<span class="string">'# '</span>, base_style=LCS)</span><br></pre></td></tr></table></figure>

<p>这设置了较亮的主题，通过实参传递的颜色给各个国家着色。</p>
<h1 id="使用API"><a href="#使用API" class="headerlink" title="使用API"></a>使用API</h1><p>编写一个独立的程序，并对其获取的数据进行可视化。这个程序将使用<strong>Web应用编程接口（API）</strong>自动请求网站的特定信息而不是整个网页，再对这些信息进行可视化。由于这样编写的程序始终使用最新的数据来生成可视化，因此即便数据瞬息万变，它呈现的信息也都是最新的。</p>
<p>我们将使用GitHub的API来请求有关该网站中Python项目的信息，然后使用Pygal生成交互式可视化，以呈现这些项目的受欢迎程度。这个程序将自动下载GitHub上星级最高的Python项目的信息，并对这些项目进行可视化。</p>
<h2 id="使用Web-API"><a href="#使用Web-API" class="headerlink" title="使用Web API"></a>使用Web API</h2><p>GitHub的API让你能够通过API调用来请求各种信息。要知道API调用是什么样的，输入以下网址：</p>
<p><a href="https://api.github.com/search/repositories?q=language:python&amp;sort=stars" target="_blank" rel="noopener">https://api.github.com/search/repositories?q=language:python&amp;sort=stars</a></p>
<p>这个调用返回GitHub当前托管了多少个Python项目，还有有关最受欢迎的Python仓库的信息。仔细研究这个调用，第一部分（<a href="https://api.github.com/）将请求发送到GitHub网站中响应API调用的部分；接下来一部分（search/repositories）让API搜索GitHub上的所有仓库。" target="_blank" rel="noopener">https://api.github.com/）将请求发送到GitHub网站中响应API调用的部分；接下来一部分（search/repositories）让API搜索GitHub上的所有仓库。</a></p>
<p>repositories后面的问号指出我们要传递一个实参。q表示查询，而等号能让我们开始指定的查询。通过使用language：python，我们指出只想获取主要语言为python仓库的信息，最后一部分查询&amp;sort=stars指定项目将按其获得的星级进行排序。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"total_count"</span>: <span class="number">1968718</span>,</span><br><span class="line">  <span class="string">"incomplete_results"</span>: false,</span><br><span class="line">  <span class="string">"items"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"id"</span>: <span class="number">21289110</span>,</span><br><span class="line">      <span class="string">"name"</span>: <span class="string">"awesome-python"</span>,</span><br><span class="line">      <span class="string">"full_name"</span>: <span class="string">"vinta/awesome-python"</span>,</span><br><span class="line">      <span class="string">"owner"</span>: &#123;</span><br></pre></td></tr></table></figure>

<p>上面显示了响应的前几行。从中可知，GitHub总共有1968718个python项目。”incomplete_results”的值为false，据此我们知道请求是成功的（它并非不完整的）。倘若GitHub无法全面处理该API，它返回的这个值将为true。接下来的列表中显示了返回的“items”，其中包含GitHub上最受欢迎的Python项目的详细信息。</p>
<h3 id="安装requests"><a href="#安装requests" class="headerlink" title="安装requests"></a>安装requests</h3><p>requests包让python程序能够轻松地向网站请求信息以及检查返回的响应，要安装requests，执行类似于下面的命令：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install --user requests</span><br></pre></td></tr></table></figure>



<h3 id="处理API响应"><a href="#处理API响应" class="headerlink" title="处理API响应"></a>处理API响应</h3><p>下面的程序，它执行API调用并处理结果，找出GitHub上星级最高的Python项目。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行API调用并存储响应</span></span><br><span class="line">url = <span class="string">'https://api.github.com/search/repositories?q=language:python&amp;sort=stars'</span></span><br><span class="line">r = requests.get(url)</span><br><span class="line">print(<span class="string">"Status code:"</span>,r.status_code)</span><br><span class="line"></span><br><span class="line"><span class="comment">#将API响应存储在一个变量中</span></span><br><span class="line">response_dict = r.json()</span><br><span class="line"></span><br><span class="line"><span class="comment">#处理结果</span></span><br><span class="line">print(response_dict.keys()) </span><br><span class="line"></span><br><span class="line">Status code: <span class="number">200</span></span><br><span class="line">dict_keys([<span class="string">'total_count'</span>, <span class="string">'incomplete_results'</span>, <span class="string">'items'</span>])</span><br></pre></td></tr></table></figure>

<p>1.我们导入模块request。</p>
<p>2.使用requests来执行调用url。调用get()并将url传递给它，再将<strong>响应对象</strong>存储在变量r中。</p>
<p>3.响应对象包含了一个名为status_code的属性，它让我们知道请求是否成功了。（状态码200表示成功了）</p>
<p>4.这个API返回一个json格式的信息，因此使用方法json()将这些信息转换为一个Python字典存储在response_dict</p>
<p>5.打印response_dict中的键。</p>
<h3 id="处理响应字典"><a href="#处理响应字典" class="headerlink" title="处理响应字典"></a>处理响应字典</h3><p>将API调用返回的信息存储到字典中后，就可以处理这个字典中的数据了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行API调用并存储响应</span></span><br><span class="line">url = <span class="string">"https://api.github.com/search/repositories?q=language:python&amp;sort=stars"</span></span><br><span class="line">r = requests.get(url)</span><br><span class="line">print(<span class="string">"status code"</span>,r.status_code)</span><br><span class="line"></span><br><span class="line"><span class="comment">#将API响应存储在一个变量中</span></span><br><span class="line">response_dict = r.json()</span><br><span class="line">print(<span class="string">"Total repositories returned:"</span>,response_dict[<span class="string">'total_count'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#搜索有关仓库的信息</span></span><br><span class="line">repo_dict = response_dict[<span class="string">'items'</span>]</span><br><span class="line">print(<span class="string">"Repositories returned:"</span>,len(repo_dict))</span><br><span class="line"></span><br><span class="line"><span class="comment">#研究第一个仓库</span></span><br><span class="line">repo_dict = repo_dict[<span class="number">0</span>]</span><br><span class="line">print(<span class="string">"\nKeys:"</span>,len(repo_dict))</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> sorted(repo_dict.keys()):</span><br><span class="line">    print(key)</span><br><span class="line">    </span><br><span class="line">status code <span class="number">200</span></span><br><span class="line">Total repositories returned: <span class="number">1970122</span></span><br><span class="line">Repositories returned: <span class="number">30</span></span><br><span class="line"></span><br><span class="line">Keys: <span class="number">70</span></span><br><span class="line">archive_url</span><br><span class="line">.......</span><br></pre></td></tr></table></figure>

<p>与item相关联的值是一个列表，其中包含很多字典，而每个字典都包含有关一个Python仓库的信息。</p>
<p>我们将这个字典列表存储在repo_dicts中。</p>
<p>repo_dict[0]提取第一个字典，并将其存储在repo_dict中。</p>
<p>接下来打印第一个仓库的字典中很多键相关的值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">--snip--</span><br><span class="line"><span class="comment">#研究第一个仓库</span></span><br><span class="line">repo_dict = repo_dict[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">print(<span class="string">"\nSelected information about first repository"</span>)</span><br><span class="line">print(<span class="string">"Name:"</span>,repo_dict[<span class="string">'name'</span>])</span><br><span class="line">print(<span class="string">"Stars:"</span>,repo_dict[<span class="string">'stargazers_count'</span>])</span><br><span class="line"></span><br><span class="line">Selected information about first repository</span><br><span class="line">Name: awesome-python</span><br><span class="line">Stars: <span class="number">38871</span></span><br></pre></td></tr></table></figure>



<h3 id="概述最受欢迎的仓库"><a href="#概述最受欢迎的仓库" class="headerlink" title="概述最受欢迎的仓库"></a>概述最受欢迎的仓库</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">--snip--</span><br><span class="line"></span><br><span class="line"><span class="comment">#搜索有关仓库的信息</span></span><br><span class="line">repo_dict = response_dict[<span class="string">'items'</span>]</span><br><span class="line">print(<span class="string">"Repositories returned:"</span>,len(repo_dict))</span><br><span class="line"></span><br><span class="line">print(<span class="string">"\nSelected information about first repository"</span>)</span><br><span class="line"><span class="keyword">for</span> repo_dict <span class="keyword">in</span> repo_dicts:</span><br><span class="line">    print(<span class="string">"Name:"</span>,repo_dict[<span class="string">'name'</span>])</span><br><span class="line">    print(<span class="string">"Stars:"</span>,repo_dict[<span class="string">'stargazers_count'</span>])</span><br><span class="line">    print(<span class="string">"Repository:"</span>,repo_dict[<span class="string">'html_url'</span>])</span><br><span class="line">    print(<span class="string">"Description:"</span>,repo_dict[<span class="string">'description'</span>])</span><br></pre></td></tr></table></figure>



<h3 id="监视API的速率限制"><a href="#监视API的速率限制" class="headerlink" title="监视API的速率限制"></a>监视API的速率限制</h3><p>大多数API都存在速率限制，即你在特定时间内可执行的请求数存在限制。要获悉你是否接近GiHub的限制，请输入<a href="https://api.github.com/rate_limit" target="_blank" rel="noopener">https://api.github.com/rate_limit</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"resources"</span>: &#123;</span><br><span class="line">    <span class="string">"core"</span>: &#123;</span><br><span class="line">      <span class="string">"limit"</span>: <span class="number">60</span>,</span><br><span class="line">      <span class="string">"remaining"</span>: <span class="number">60</span>,</span><br><span class="line">      <span class="string">"reset"</span>: <span class="number">1506236519</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"search"</span>: &#123;</span><br><span class="line">      <span class="string">"limit"</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="string">"remaining"</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="string">"reset"</span>: <span class="number">1506232979</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>search中，limit代表每分钟10个请求，而在当前这一分钟，我们还可以执行10个请求。若到达配置，你必须等待配额重置。</p>
<h2 id="使用Pygal可视化仓库"><a href="#使用Pygal可视化仓库" class="headerlink" title="使用Pygal可视化仓库"></a>使用Pygal可视化仓库</h2><p>现在进行可视化，呈现GitHub上Python项目最受欢迎程度。条形的高低代表获得了多少颗星。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests </span><br><span class="line"><span class="keyword">import</span> pygal</span><br><span class="line"><span class="keyword">from</span> pygal.style <span class="keyword">import</span> LightColorizedStyle <span class="keyword">as</span> LCS,LightenStyle <span class="keyword">as</span> LS</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行API调用并存储响应</span></span><br><span class="line">url = <span class="string">"https://api.github.com/search/repositories?q=language:python&amp;sort=stars"</span></span><br><span class="line">r = requests.get(url)</span><br><span class="line">print(<span class="string">"status code"</span>,r.status_code)</span><br><span class="line"></span><br><span class="line"><span class="comment">#将API响应存储在一个变量中</span></span><br><span class="line">response_dict = r.json()</span><br><span class="line">print(<span class="string">"Total repositories returned:"</span>,response_dict[<span class="string">'total_count'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#搜索有关仓库的信息</span></span><br><span class="line">repo_dicts = response_dict[<span class="string">'items'</span>]</span><br><span class="line"></span><br><span class="line">names,stars = [],[]</span><br><span class="line"><span class="keyword">for</span> repo_dict <span class="keyword">in</span> repo_dicts:</span><br><span class="line">    names.append(repo_dict[<span class="string">'name'</span>])</span><br><span class="line">    stars.append(repo_dict[<span class="string">'stargazers_count'</span>])</span><br><span class="line">    </span><br><span class="line"><span class="comment">#可视化</span></span><br><span class="line">my_style = LS(<span class="string">'# '</span>,base_style=LCS)</span><br><span class="line">chart = pygal.Bar(style=my_style,x_label_rotation=<span class="number">45</span>,show_legend=<span class="literal">False</span>)</span><br><span class="line">chart.title = <span class="string">"Most-Starred Python Projects on GitHub"</span></span><br><span class="line">chart.x_labels = names</span><br><span class="line"></span><br><span class="line">chart.add(<span class="string">''</span>,stars)</span><br><span class="line">chart.render_to_file(<span class="string">'python_repos.svg'</span>)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_24.png" alt="屏幕快照 2017-09-24 下午2.19.13"></p>
<p>x_label_rotation=45让标签绕x轴旋转45度，并隐藏了图例show_legend=False</p>
<h3 id="改进Pygal图表"><a href="#改进Pygal图表" class="headerlink" title="改进Pygal图表"></a>改进Pygal图表</h3><p>下面来改进这个图表的样式，创建一个配置对象，在其中包含要传递给Bar()的所有配置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">--snip--</span><br><span class="line"><span class="comment">#可视化</span></span><br><span class="line">my_style = LS(<span class="string">'# '</span>,base_style=LCS)</span><br><span class="line">my_config = pygal.Config()</span><br><span class="line">my_config.x_label_rotation = <span class="number">45</span></span><br><span class="line">my_config.show_legend = <span class="literal">False</span></span><br><span class="line">my_config.title_font_size = <span class="number">14</span></span><br><span class="line">my_config.major_label_font_size = <span class="number">18</span></span><br><span class="line">my_config.truncate_label = <span class="number">15</span></span><br><span class="line">my_config.show_y_guides = <span class="literal">False</span></span><br><span class="line">my_config.width = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">chart = pygal.Bar(my_config,style=my_style)</span><br><span class="line">chart.title = <span class="string">"Most-Starred Python Projects on GitHub"</span></span><br><span class="line">chart.x_labels = names</span><br><span class="line"></span><br><span class="line">chart.add(<span class="string">''</span>,stars)</span><br><span class="line">chart.render_to_file(<span class="string">'python_repos.svg'</span>)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_25.png" alt="屏幕快照 2017-09-24 下午2.32.56"></p>
<p>我们创建了一个Pygal类Config的实例，并将其命名为my_config，通过修改my_config，可定制图表的外观。truncate_label将较长的项目名缩短为15个字符。show_y_guides为False将隐藏图表中的水平线。width为自定义宽度，让图表更充分地利用浏览器中的可用空间。</p>
<h3 id="添加自定义工具提示"><a href="#添加自定义工具提示" class="headerlink" title="添加自定义工具提示"></a>添加自定义工具提示</h3><p>在Pygal中，将鼠标指向条形将显示它表示的信息，这通常称为<strong>工具提示</strong>。在这个示例中，当前显示的是项目获得了多少个星。我们向add()传递字典列表，而不是值列表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pygal</span><br><span class="line"><span class="keyword">from</span> pygal.style <span class="keyword">import</span> LightColorizedStyle <span class="keyword">as</span> LCS,LightenStyle <span class="keyword">as</span> LS</span><br><span class="line"></span><br><span class="line">my_style = LS(<span class="string">'# '</span>,base_style=LCS)</span><br><span class="line">chart = pygal.Bar(style=my_style,x_label_rotation=<span class="number">45</span>,show_legend=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">chart.title = <span class="string">'Python Project'</span></span><br><span class="line">chart.x_labels = [<span class="string">'httpie'</span>,<span class="string">'django'</span>,<span class="string">'flask'</span>]</span><br><span class="line"></span><br><span class="line">plot_dicts = [</span><br><span class="line">    &#123;<span class="string">'value'</span>:<span class="number">16101</span>,<span class="string">'label'</span>:<span class="string">'Description of httpie.'</span>&#125;,</span><br><span class="line">    &#123;<span class="string">'value'</span>:<span class="number">15028</span>,<span class="string">'label'</span>:<span class="string">'Description of django.'</span>&#125;,</span><br><span class="line">    &#123;<span class="string">'value'</span>:<span class="number">14798</span>,<span class="string">'label'</span>:<span class="string">'Description of flask'</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">chart.add(<span class="string">''</span>,plot_dicts)</span><br><span class="line">chart.render_to_file(<span class="string">'bar_description.svg'</span>)</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_26.png" alt="屏幕快照 2017-09-24 下午3.06.59"></p>
<p>每个字典都包含两个键：“value”和“label”。Pygal根据与键“value”相关联的数字来确定条形的高度，并使用“label”相关联的字符串给条形创建工具。</p>
<h3 id="根据数据绘图"><a href="#根据数据绘图" class="headerlink" title="根据数据绘图"></a>根据数据绘图</h3><p>为根据数据绘图，我们将自动生成plot_dicts，其中包含API调用的30个项目的信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">--snip--</span><br><span class="line"><span class="comment">#搜索有关仓库的信息</span></span><br><span class="line">repo_dicts = response_dict[<span class="string">'items'</span>]</span><br><span class="line"></span><br><span class="line">names,plot_dicts = [],[]</span><br><span class="line"><span class="keyword">for</span> repo_dict <span class="keyword">in</span> repo_dicts:</span><br><span class="line">  names.append(repo_dict[<span class="string">'name'</span>])</span><br><span class="line">  </span><br><span class="line">  plot_dict = &#123;</span><br><span class="line">      <span class="string">'value'</span>:repo_dict[<span class="string">'stargazers_count'</span>],</span><br><span class="line">      <span class="string">'label'</span>:repo_dict[<span class="string">'description'</span>],</span><br><span class="line">  &#125;</span><br><span class="line">  plot_dicts.append(plot_dict)</span><br><span class="line"></span><br><span class="line">--snip--</span><br><span class="line"></span><br><span class="line">chart.add(<span class="string">''</span>,plot_dicts)</span><br><span class="line"></span><br><span class="line">--snip--</span><br></pre></td></tr></table></figure>

<p><img data-src="/images/Python-base/DataView_27.png" alt="屏幕快照 2017-09-24 下午3.23.21"></p>
<h3 id="在图表中添加可单击的链接"><a href="#在图表中添加可单击的链接" class="headerlink" title="在图表中添加可单击的链接"></a>在图表中添加可单击的链接</h3><p>Pygal允许你将图表中的每个条形用作网站的相应链接。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--snip--</span><br><span class="line"> </span><br><span class="line"> plot_dict = &#123;</span><br><span class="line">     <span class="string">'value'</span>:repo_dict[<span class="string">'stargazers_count'</span>],</span><br><span class="line">     <span class="string">'label'</span>:repo_dict[<span class="string">'description'</span>],</span><br><span class="line">     <span class="string">'xlink'</span>:repo_dict[<span class="string">'html_url'</span>],</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> --snip--</span><br></pre></td></tr></table></figure>
    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>Grace Koo
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://unknown.yuzhouwan.com/2017/09/25/DataView/" title="数据可视化基础">https://unknown.yuzhouwan.com/2017/09/25/DataView/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-ND</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"># Python</a>
              <a href="/tags/iPython/" rel="tag"># iPython</a>
              <a href="/tags/Pygal/" rel="tag"># Pygal</a>
              <a href="/tags/Matplotlib/" rel="tag"># Matplotlib</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/09/18/MachineLearning-Note/" rel="prev" title="Machine Learning基础">
      <i class="fa fa-chevron-left"></i> Machine Learning基础
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/09/28/Numpy-note/" rel="next" title="Numpy基础">
      Numpy基础 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#生成数据"><span class="nav-number">1.</span> <span class="nav-text">生成数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装matplotlib"><span class="nav-number">1.1.</span> <span class="nav-text">安装matplotlib</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#测试matplotlib"><span class="nav-number">1.1.1.</span> <span class="nav-text">测试matplotlib</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#matplotlib画廊"><span class="nav-number">1.1.2.</span> <span class="nav-text">matplotlib画廊</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#绘制简单的折线图plot"><span class="nav-number">1.2.</span> <span class="nav-text">绘制简单的折线图plot()</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改标签文字和线条粗细"><span class="nav-number">1.2.1.</span> <span class="nav-text">修改标签文字和线条粗细</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#校正图形"><span class="nav-number">1.2.2.</span> <span class="nav-text">校正图形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用scatter-绘制散点图"><span class="nav-number">1.2.3.</span> <span class="nav-text">使用scatter()绘制散点图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用scatter-绘制一系列点"><span class="nav-number">1.2.4.</span> <span class="nav-text">使用scatter()绘制一系列点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自动计算数据"><span class="nav-number">1.2.5.</span> <span class="nav-text">自动计算数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除数据点的轮廓"><span class="nav-number">1.2.6.</span> <span class="nav-text">删除数据点的轮廓</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义颜色"><span class="nav-number">1.2.7.</span> <span class="nav-text">自定义颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用颜色映射"><span class="nav-number">1.2.8.</span> <span class="nav-text">使用颜色映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自动保存图表"><span class="nav-number">1.2.9.</span> <span class="nav-text">自动保存图表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#随机漫步"><span class="nav-number">1.3.</span> <span class="nav-text">随机漫步</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建RandomWalk-类"><span class="nav-number">1.3.1.</span> <span class="nav-text">创建RandomWalk()类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#选择方向"><span class="nav-number">1.3.2.</span> <span class="nav-text">选择方向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#绘制随机漫步图"><span class="nav-number">1.3.3.</span> <span class="nav-text">绘制随机漫步图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置随机漫步图样式"><span class="nav-number">1.3.4.</span> <span class="nav-text">设置随机漫步图样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#给点着色"><span class="nav-number">1.3.5.</span> <span class="nav-text">给点着色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重新绘制起点和终点"><span class="nav-number">1.3.6.</span> <span class="nav-text">重新绘制起点和终点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#隐藏坐标轴"><span class="nav-number">1.3.7.</span> <span class="nav-text">隐藏坐标轴</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增加点数"><span class="nav-number">1.3.8.</span> <span class="nav-text">增加点数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#调整屏幕以适应屏幕"><span class="nav-number">1.3.9.</span> <span class="nav-text">调整屏幕以适应屏幕</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用Pygal模拟掷骰子"><span class="nav-number">1.4.</span> <span class="nav-text">使用Pygal模拟掷骰子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装Pygal"><span class="nav-number">1.4.1.</span> <span class="nav-text">安装Pygal</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pygal画廊"><span class="nav-number">1.4.2.</span> <span class="nav-text">Pygal画廊</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#掷单个骰子"><span class="nav-number">1.4.3.</span> <span class="nav-text">掷单个骰子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#同时掷两个骰子"><span class="nav-number">1.4.4.</span> <span class="nav-text">同时掷两个骰子</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#下载数据"><span class="nav-number">2.</span> <span class="nav-text">下载数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CSV文件格式"><span class="nav-number">2.1.</span> <span class="nav-text">CSV文件格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#分析CSV文件头"><span class="nav-number">2.1.1.</span> <span class="nav-text">分析CSV文件头</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印文件头及其位置"><span class="nav-number">2.1.2.</span> <span class="nav-text">打印文件头及其位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#提取并读取数据"><span class="nav-number">2.1.3.</span> <span class="nav-text">提取并读取数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#绘制气温图表"><span class="nav-number">2.1.4.</span> <span class="nav-text">绘制气温图表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块datetime"><span class="nav-number">2.1.5.</span> <span class="nav-text">模块datetime</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在图表中添加日期"><span class="nav-number">2.1.6.</span> <span class="nav-text">在图表中添加日期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#最高与最低气温"><span class="nav-number">2.1.7.</span> <span class="nav-text">最高与最低气温</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#错误检查"><span class="nav-number">2.1.8.</span> <span class="nav-text">错误检查</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#制作世界人口地图：JSON格式"><span class="nav-number">2.2.</span> <span class="nav-text">制作世界人口地图：JSON格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#获取两个字母的国别码"><span class="nav-number">2.2.1.</span> <span class="nav-text">获取两个字母的国别码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#制作世界地图"><span class="nav-number">2.2.2.</span> <span class="nav-text">制作世界地图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在世界地图上呈现数字数据"><span class="nav-number">2.2.3.</span> <span class="nav-text">在世界地图上呈现数字数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#绘制完整的世界人口地图"><span class="nav-number">2.2.4.</span> <span class="nav-text">绘制完整的世界人口地图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用Pygal设置世界地图样式"><span class="nav-number">2.2.5.</span> <span class="nav-text">用Pygal设置世界地图样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#加亮颜色主题"><span class="nav-number">2.2.6.</span> <span class="nav-text">加亮颜色主题</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使用API"><span class="nav-number">3.</span> <span class="nav-text">使用API</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用Web-API"><span class="nav-number">3.1.</span> <span class="nav-text">使用Web API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装requests"><span class="nav-number">3.1.1.</span> <span class="nav-text">安装requests</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理API响应"><span class="nav-number">3.1.2.</span> <span class="nav-text">处理API响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理响应字典"><span class="nav-number">3.1.3.</span> <span class="nav-text">处理响应字典</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#概述最受欢迎的仓库"><span class="nav-number">3.1.4.</span> <span class="nav-text">概述最受欢迎的仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#监视API的速率限制"><span class="nav-number">3.1.5.</span> <span class="nav-text">监视API的速率限制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用Pygal可视化仓库"><span class="nav-number">3.2.</span> <span class="nav-text">使用Pygal可视化仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#改进Pygal图表"><span class="nav-number">3.2.1.</span> <span class="nav-text">改进Pygal图表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加自定义工具提示"><span class="nav-number">3.2.2.</span> <span class="nav-text">添加自定义工具提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#根据数据绘图"><span class="nav-number">3.2.3.</span> <span class="nav-text">根据数据绘图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在图表中添加可单击的链接"><span class="nav-number">3.2.4.</span> <span class="nav-text">在图表中添加可单击的链接</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Grace Koo</p>
  <div class="site-description" itemprop="description">正在深入学习各种CV知识</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/GraceKoo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;GraceKoo" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-nd.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://yuzhouwan.com/" title="https:&#x2F;&#x2F;yuzhouwan.com" rel="noopener" target="_blank">宇宙湾</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">unknown.yuzhouwan.com</span>
</div>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.6.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
